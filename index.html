<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Kalkulator Praktis</title>
  <meta name="description" content="Simulasi angsuran KPR — Kalkulator Praktis oleh Dhito Property">
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <!-- html2canvas for screenshot -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<style>
  :root {
    --bg: #f5f7fb;
    --card: rgba(255, 255, 255, 0.7);
    --muted: #707b8a;
    --accent: #007aff; /* Warna biru khas iOS */
    --radius-lg: 18px;
    --shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
    --blur-bg: blur(20px);
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }

  * {
    box-sizing: border-box;
    -webkit-tap-highlight-color: transparent;
  }

  html, body {
    height: 100%;
    margin: 0;
    background: linear-gradient(180deg, #eaf1ff 0%, var(--bg) 100%);
    -webkit-font-smoothing: antialiased;
  }

  .wrap {
    max-width: 960px;
    margin: 24px auto;
    padding: 0 16px;
  }

  header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 20px;
    backdrop-filter: var(--blur-bg);
  }

  /* Logo */
  .app-icon {
    width: 56px;
    height: 56px;
    border-radius: 14px;
    background: var(--accent);
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 8px 16px rgba(0, 122, 255, 0.25);
    overflow: hidden;
    flex-shrink: 0;
  }

  .app-icon img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    border-radius: 14px;
  }

  h1 {
    font-size: 1.2rem;
    font-weight: 700;
    color: #111827;
    margin: 0;
  }

  .muted {
    color: var(--muted);
    font-size: 0.9rem;
  }

  .grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 16px;
  }

  @media (min-width: 920px) {
    .grid {
      grid-template-columns: 380px 1fr;
    }
  }

  /* Card style */
  .card {
    background: var(--card);
    border-radius: var(--radius-lg);
    padding: 18px;
    box-shadow: var(--shadow);
    backdrop-filter: var(--blur-bg);
    border: 1px solid rgba(255, 255, 255, 0.3);
    transition: transform 0.25s ease, box-shadow 0.25s ease;
  }

  .card:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 28px rgba(0, 0, 0, 0.1);
  }

  label {
    display: block;
    font-size: 0.85rem;
    color: var(--muted);
    margin-bottom: 6px;
    font-weight: 600;
  }

  .input {
    width: 100%;
    padding: 12px;
    border-radius: 12px;
    border: 1px solid #e3e8f4;
    font-size: 1rem;
    background: rgba(255, 255, 255, 0.9);
    transition: border-color 0.2s, box-shadow 0.2s;
  }

  .input:focus {
    border-color: var(--accent);
    box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.15);
    outline: none;
  }

  .btn {
    padding: 10px 16px;
    border-radius: 12px;
    background: var(--accent);
    color: #fff;
    border: none;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.2s, transform 0.2s;
  }

  .btn:hover {
    background: #0066e8;
    transform: translateY(-1px);
  }

  .btn:active {
    transform: scale(0.98);
  }

  .btn.ghost {
    background: rgba(255, 255, 255, 0.4);
    color: var(--accent);
    border: 1px solid rgba(0, 122, 255, 0.2);
  }

  .small {
    font-size: 0.8rem;
    color: var(--muted);
  }

  .stats {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    margin-top: 12px;
  }

  .stat {
    flex: 1;
    min-width: 140px;
    padding: 12px;
    border-radius: 12px;
    background: rgba(255, 255, 255, 0.8);
    box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.03);
    text-align: center;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.88rem;
    margin-top: 10px;
    border-radius: 12px;
    overflow: hidden;
  }

  th, td {
    padding: 10px 8px;
    border-bottom: 1px solid #f1f6ff;
    text-align: right;
  }

  th {
    background: #f9fbff;
    color: var(--muted);
    font-weight: 700;
  }

  .left {
    text-align: left;
  }

  .controls {
    display: flex;
    gap: 8px;
    align-items: center;
    flex-wrap: wrap;
  }

  /* Modal */
  .modal {
    position: fixed;
    inset: 0;
    display: none;
    align-items: center;
    justify-content: center;
    background: rgba(10, 20, 40, 0.45);
    z-index: 9999;
    backdrop-filter: blur(6px);
  }

  .modal .inner {
    background: rgba(255, 255, 255, 0.9);
    padding: 18px;
    border-radius: 16px;
    width: 92%;
    max-width: 520px;
    box-shadow: 0 20px 60px rgba(2, 6, 23, 0.2);
  }

  .bank-row {
    display: flex;
    gap: 8px;
    align-items: center;
    margin-bottom: 8px;
  }

  .bank-row input {
    flex: 1;
  }

  .help {
    font-size: 0.8rem;
    color: #475569;
    margin-top: 8px;
  }

  /* Responsiveness */
  @media (max-width: 768px) {
    h1 {
      font-size: 1rem;
    }
    .controls button {
      padding: 8px 10px;
      font-size: 0.8rem;
    }
    .card {
      padding: 14px;
    }
    table {
      font-size: 0.8rem;
    }
    #kprChart {
      max-height: 260px;
    }
  }

  @media (max-width: 480px) {
    .grid {
      grid-template-columns: 1fr !important;
    }
    .controls {
      flex-wrap: wrap;
      justify-content: center;
    }
    .btn {
      width: 100%;
      text-align: center;
    }
    header {
      flex-direction: column;
      align-items: flex-start;
    }
  }
</style>

</head>
<body>
  <div class="wrap">
    <header>
<div id="logo" class="app-icon" title="Ketuk 3x untuk admin">
  <img src="https://raw.githubusercontent.com/dhitoid/Kalkulator-KPR-Dhito/main/assets/modernia.png" alt="Logo Dhito Property" />
</div>
        <h1>Kalkulator Praktis</h1>
        <div class="muted">Simulasi angsuran — Dhito Property</div>
      </div>
    </header>

    <div class="grid">
      <div class="card" id="input-card">
        <label for="bank">Pilih Bank</label>
        <select id="bank" class="input" aria-label="Pilih Bank">
          <!-- options generated by JS -->
        </select>

        <div style="display:flex;gap:8px;margin-top:12px">
          <div style="flex:1">
            <label for="price">Harga Properti</label>
            <input id="price" class="input money" inputmode="numeric" value="1000000000" />
          </div>
        </div>

        <div style="display:flex;gap:8px;margin-top:10px">
          <div style="flex:1">
            <label for="dpVal">Uang muka</label>
            <input id="dpVal" class="input money" inputmode="numeric" value="200000000" />
          </div>
          <div style="width:120px">
            <label for="dpPct">atau (%)</label>
            <input id="dpPct" class="input" inputmode="numeric" value="20" />
          </div>
        </div>

        <div style="display:flex;gap:8px;margin-top:10px">
          <div style="flex:1">
            <label for="years">Tenor (tahun)</label>
            <input id="years" class="input" inputmode="numeric" type="number" min="1" max="30" value="15" />
          </div>
          <div style="width:160px">
            <label for="rate">Suku bunga (% per tahun)</label>
            <input id="rate" class="input" inputmode="decimal" value="7.25" />
          </div>
        </div>

        <div style="display:flex;gap:8px;margin-top:10px">
          <div style="flex:1">
            <label for="otherFees">Biaya lain (opsional)</label>
            <input id="otherFees" class="input money" inputmode="numeric" value="5000000" />
          </div>
          <div style="width:160px">
            <label for="extra">Pembayaran ekstra/bln</label>
            <input id="extra" class="input money" inputmode="numeric" value="0" />
          </div>
        </div>

        <div style="display:flex;gap:10px;margin-top:14px;align-items:center">
          <button id="calcBtn" class="btn">Hitung</button>
          <button id="resetBtn" class="btn ghost">Reset</button>
          <div style="margin-left:auto" class="small">Metode: <strong>annuitas</strong></div>
        </div>

        <div class="stats" id="summary" style="display:none">
          <div class="stat">
            <div class="small">Plafon</div>
            <div id="loanAmt" style="font-size:1.05rem;font-weight:800">Rp 0</div>
          </div>
          <div class="stat">
            <div class="small">Angsuran/bln</div>
            <div id="monthly" style="font-size:1.05rem;font-weight:800">Rp 0</div>
          </div>
          <div class="stat">
            <div class="small">Total bunga</div>
            <div id="totalInterest" style="font-size:1.05rem;font-weight:800">Rp 0</div>
          </div>
        </div>

        <div class="help">Tips: ketuk logo di atas 3x untuk mengubah suku bunga bank.</div>
      </div>

      <div class="card" id="result-card">
        <div style="display:flex;align-items:center;justify-content:space-between;gap:12px">
          <h2 style="margin:0">Hasil & Amortisasi</h2>
          <div class="controls">
            <button id="exportImg" class="btn">Bagikan Gambar</button>
            <button id="downloadCsv" class="btn ghost">Ekspor CSV</button>
            <button id="shareText" class="btn ghost">Kirim ke WhatsApp</button>
          </div>
        </div>

        <div id="result-area" style="margin-top:12px">
          <canvas id="kprChart" height="320" style="width:100%;max-height:420px"></canvas>

          <div style="overflow:auto;margin-top:12px;max-height:280px">
            <table id="amortTable" aria-live="polite">
              <thead><tr><th class="left">Bulan</th><th>Saldo awal</th><th>Angsuran pokok</th><th>Bunga</th><th class="left">Saldo akhir</th></tr></thead>
              <tbody></tbody>
            </table>
          </div>
        </div>

        <footer style="margin-top:12px">
          <div class="small">Dibuat oleh Dhito Property· Catatan: perhitungan menggunakan rumus annuitas. Hasil aktual dapat berbeda.</div>
        </footer>
      </div>
    </div>
  </div>

  <!-- ADMIN modal -->
  <div id="modal" class="modal">
    <div class="inner">
      <h3>Kelola Suku Bunga Bank</h3>
      <div id="bankList"></div>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:8px">
        <button id="saveBanks" class="btn">Simpan</button>
        <button id="resetBanks" class="btn ghost">Reset Default</button>
        <button id="closeModal" class="btn ghost">Tutup</button>
      </div>
      <div class="help">Perubahan tersimpan dan berlaku saat Anda mengakses situs dari perangkat ini.</div>
    </div>
  </div>

<script>
/* ---------------- Utilities ---------------- */
function fmtRupiah(n){
  if(!isFinite(n)) return 'Rp 0';
  const sign = n < 0 ? '-' : '';
  n = Math.abs(Math.round(n));
  return sign + 'Rp ' + n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
}
function unfmt(v){
  if (!v) return 0;
  const clean = String(v).replace(/[^\d\-]/g, '');
  return Number(clean) || 0;
}
function formatNumberWithDots(value) {
  const num = value.replace(/\D/g, '');
  return num ? num.replace(/\B(?=(\d{3})+(?!\d))/g, '.') : '';
}
function attachMoneyInputs() {
  document.querySelectorAll('.money').forEach(el => {
    el.value = formatNumberWithDots(el.value);
    el.addEventListener('input', () => {
      const pos = el.selectionStart;
      const before = el.value.length;
      el.value = formatNumberWithDots(el.value);
      const after = el.value.length;
      el.selectionEnd = pos + (after - before);
    });
  });
}

/* ---------------- Bank rates ---------------- */
const defaultBankRates = {
  'BCA': 7.25,
  'BTN': 6.90,
  'BRI': 7.10,
  'MANDIRI': 7.50,
  'BNI': 7.40,
  'OCBC': 7.00,
  'BSI': 6.85,
  'DEVELOPER': null // ganti dari CUSTOM ke DEVELOPER
};
const storageKey = 'kpr_bank_rates_v2';
function loadBankRates(){
  try {
    const raw = localStorage.getItem(storageKey);
    if(!raw) return {...defaultBankRates};
    return {...defaultBankRates, ...JSON.parse(raw)};
  }catch{return {...defaultBankRates}}
}
function saveBankRates(map){
  try { localStorage.setItem(storageKey, JSON.stringify(map)); } catch(e){}
}
let bankRates = loadBankRates();

/* ---------------- Elemen ---------------- */
const bankEl=document.getElementById('bank');
const priceEl=document.getElementById('price');
const dpValEl=document.getElementById('dpVal');
const dpPctEl=document.getElementById('dpPct');
const yearsEl=document.getElementById('years');
const rateEl=document.getElementById('rate');
const otherFeesEl=document.getElementById('otherFees');
const extraEl=document.getElementById('extra');
const calcBtn=document.getElementById('calcBtn');
const resetBtn=document.getElementById('resetBtn');
const summaryDiv=document.getElementById('summary');
const loanAmtEl=document.getElementById('loanAmt');
const monthlyEl=document.getElementById('monthly');
const totalInterestEl=document.getElementById('totalInterest');
const amortTableBody=document.querySelector('#amortTable tbody');
const downloadCsvBtn=document.getElementById('downloadCsv');
const exportImgBtn=document.getElementById('exportImg');
const shareTextBtn=document.getElementById('shareText');
const logo=document.getElementById('logo');
const modal=document.getElementById('modal');
const bankList=document.getElementById('bankList');
const saveBanksBtn=document.getElementById('saveBanks');
const resetBanksBtn=document.getElementById('resetBanks');
const closeModalBtn=document.getElementById('closeModal');
const resultArea=document.getElementById('result-area');

/* ---------------- Chart ---------------- */
let kprChart=null;
function createChart(labels,datasets){
  const ctx=document.getElementById('kprChart');
  if(kprChart)kprChart.destroy();
  kprChart=new Chart(ctx,{
    type:'line',
    data:{labels,datasets},
    options:{
      maintainAspectRatio:false,
      plugins:{
        legend:{display:true,position:'bottom'},
        tooltip:{callbacks:{label:ctx=>ctx.dataset.label+': '+fmtRupiah(ctx.raw||0)}}
      },
      scales:{y:{ticks:{callback:v=>'Rp '+Number(v).toLocaleString('id')}}}
    }
  });
}

/* ---------------- Amortisasi ---------------- */
function calcAmortization({principal,annualRate,months,extra=0}){
  const r=annualRate/12/100;
  const baseMonthly=r===0?principal/months:(r*principal)/(1-Math.pow(1+r,-months));
  const schedule=[];
  let bal=principal,totalInterest=0;
  for(let m=1;m<=months&&bal>0.0001;m++){
    const interest=bal*r;
    let principalPay=baseMonthly-interest+extra;
    if(principalPay>bal)principalPay=bal;
    const endBal=bal-principalPay;
    schedule.push({month:m,startBalance:bal,principalPayment:principalPay,interestPayment:interest,endBalance:endBal});
    totalInterest+=interest;bal=endBal;
  }
  return{schedule,monthlyPayment:baseMonthly+extra,totalInterest,principal,months:schedule.length};
}

/* ---------------- Render ---------------- */
function renderResults(res){
  summaryDiv.style.display='flex';
  loanAmtEl.textContent=fmtRupiah(res.principal);
  monthlyEl.textContent=fmtRupiah(res.monthlyPayment);
  totalInterestEl.textContent=fmtRupiah(res.totalInterest);
  amortTableBody.innerHTML='';
  const labels=[],balSeries=[],interestSeries=[],principalSeries=[];
  res.schedule.forEach(r=>{
    labels.push(r.month);
    balSeries.push(r.endBalance);
    interestSeries.push(r.interestPayment);
    principalSeries.push(r.principalPayment);
    const tr=document.createElement('tr');
    tr.innerHTML=`<td class="left">#${r.month}</td><td>${fmtRupiah(r.startBalance)}</td><td>${fmtRupiah(r.principalPayment)}</td><td>${fmtRupiah(r.interestPayment)}</td><td class="left">${fmtRupiah(r.endBalance)}</td>`;
    amortTableBody.appendChild(tr);
  });
  createChart(labels,[
    {label:'Saldo akhir (Rp)',data:balSeries,borderWidth:3,tension:0.2},
    {label:'Bunga/bln (Rp)',data:interestSeries,borderWidth:2,tension:0.2},
    {label:'Pokok/bln (Rp)',data:principalSeries,borderWidth:2,tension:0.2}
  ]);
}

/* ---------------- Bank Selector ---------------- */
function populateBankSelect(){
  bankEl.innerHTML='';
  Object.keys(bankRates).forEach(k=>{
    const opt=document.createElement('option');
    opt.value=k;
    const v=bankRates[k];
    opt.textContent=k+(v!=null?' — '+v+'%':(k==='DEVELOPER'?' — Developer':''));
    bankEl.appendChild(opt);
  });
}
function updateRateFromBank(){
  const v=bankRates[bankEl.value];
  if(v==null){rateEl.removeAttribute('readonly');}
  else{rateEl.value=v;rateEl.setAttribute('readonly','true');}
}
populateBankSelect();updateRateFromBank();
bankEl.addEventListener('change',updateRateFromBank);
attachMoneyInputs();

/* ---------------- Field linkage ---------------- */
dpPctEl.addEventListener('input',()=>{
  const price=unfmt(priceEl.value);const pct=parseFloat(dpPctEl.value)||0;
  if(price>=0&&pct>=0){dpValEl.value=formatNumberWithDots(String(Math.round(price*pct/100)));}
});
dpValEl.addEventListener('input',()=>{
  const price=unfmt(priceEl.value);const dp=unfmt(dpValEl.value);
  if(price>=0&&dp>=0){dpPctEl.value=((dp/price)*100).toFixed(2);}
});
priceEl.addEventListener('input',()=>{
  const price=unfmt(priceEl.value);const pct=parseFloat(dpPctEl.value)||0;
  if(price>=0&&pct>=0){dpValEl.value=formatNumberWithDots(String(Math.round(price*pct/100)));}
});

/* ---------------- Hitung ---------------- */
function handleCalculate(){
  const price=unfmt(priceEl.value);
  const dp=unfmt(dpValEl.value);
  const years=parseInt(yearsEl.value)||0;
  const rate=parseFloat(rateEl.value)||0;
  const otherFees=unfmt(otherFeesEl.value);
  const extra=unfmt(extraEl.value);
  const principal=Math.max(0,price-dp+otherFees);
  const months=years*12;
  if(principal<=0||months<=0){alert("Pastikan harga & tenor valid.");return;}
  const res=calcAmortization({principal,annualRate:rate,months,extra});
  renderResults(res);
  window._lastResult={inputs:{price,dp,years,rate,otherFees,extra,bank:bankEl.value},summary:res};
}
calcBtn.addEventListener('click',handleCalculate);

/* ---------------- Reset ---------------- */
resetBtn.addEventListener('click',()=>{
  priceEl.value='0';dpValEl.value='0';dpPctEl.value='20';
  yearsEl.value='15';bankRates=loadBankRates();populateBankSelect();bankEl.value='BCA';updateRateFromBank();
  otherFeesEl.value='0';extraEl.value='0';
  summaryDiv.style.display='none';amortTableBody.innerHTML='';if(kprChart)kprChart.destroy();
});

/* ---------------- CSV Export (format Rp) ---------------- */
downloadCsvBtn.addEventListener('click',()=>{
  const rows=[...amortTableBody.querySelectorAll('tr')];
  if(!rows.length){alert('Hitung dulu sebelum ekspor.');return;}
  const header=['Bulan','Saldo awal','Angsuran pokok','Bunga','Saldo akhir'];
  const lines=[header.join(',')];
  rows.forEach(r=>{
    const tds=r.querySelectorAll('td');
    const month=tds[0].textContent.replace(/[^0-9]/g,'');
    const start=fmtRupiah(unfmt(tds[1].textContent));
    const pokok=fmtRupiah(unfmt(tds[2].textContent));
    const bunga=fmtRupiah(unfmt(tds[3].textContent));
    const end=fmtRupiah(unfmt(tds[4].textContent));
    lines.push([month,start,pokok,bunga,end].join(','));
  });
  const blob=new Blob([lines.join('\n')],{type:'text/csv'});
  const a=document.createElement('a');a.href=URL.createObjectURL(blob);
  a.download='amortisasi_kpr.csv';a.click();a.remove();
});

/* ---------------- Bagikan gambar (hanya chart+hasil) ---------------- */
exportImgBtn.addEventListener('click',async()=>{
  if(!window._lastResult){alert('Hitung dulu sebelum bagikan.');return;}
  try{
    const el=document.getElementById('result-area');
    const canvas=await html2canvas(el,{scale:2,useCORS:true,backgroundColor:'#fff'});
    canvas.toBlob(async blob=>{
      if(!blob)return alert('Gagal membuat gambar');
      const file=new File([blob],'hasil_kpr.png',{type:'image/png'});
      if(navigator.canShare&&navigator.canShare({files:[file]})){
        await navigator.share({files:[file],title:'Hasil Simulasi KPR',text:'Simulasi KPR — Kalkulator Praktis'});
      }else{
        const link=document.createElement('a');
        link.href=canvas.toDataURL('image/png');
        link.download='hasil_kpr.png';
        link.click();
      }
    });
  }catch(e){alert('Gagal membuat gambar, gunakan browser terbaru.');}
});

/* ---------------- Admin Modal ---------------- */
let tapCount=0,tapTimer=null;
logo.addEventListener('click',()=>{
  tapCount++;
  if(tapTimer)clearTimeout(tapTimer);
  tapTimer=setTimeout(()=>tapCount=0,800);
  if(tapCount>=3){tapCount=0;openAdminModal();}
});
function openAdminModal(){
  bankList.innerHTML='';
  Object.keys(bankRates).forEach(k=>{
    const row=document.createElement('div');row.className='bank-row';
    const label=document.createElement('div');label.style.width='90px';label.textContent=k;
    const input=document.createElement('input');input.type='number';input.step='0.01';input.className='input';input.value=bankRates[k]==null?'':bankRates[k];input.dataset.key=k;
    const note=document.createElement('div');note.style.width='40px';note.textContent='%';row.append(label,input,note);
    bankList.append(row);
  });
  modal.style.display='flex';
}
closeModalBtn.onclick=()=>modal.style.display='none';
saveBanksBtn.onclick=()=>{
  bankList.querySelectorAll('input').forEach(inp=>{
    bankRates[inp.dataset.key]=inp.value===''?null:Number(inp.value);
  });
  saveBankRates(bankRates);populateBankSelect();updateRateFromBank();modal.style.display='none';
  alert('Suku bunga disimpan.');
};
resetBanksBtn.onclick=()=>{
  if(!confirm('Reset suku bunga ke default?'))return;
  bankRates={...defaultBankRates};saveBankRates(bankRates);populateBankSelect();updateRateFromBank();modal.style.display='none';
};

/* ---------------- Init ---------------- */
document.addEventListener('DOMContentLoaded',()=>{
  populateBankSelect();bankEl.value='BCA';updateRateFromBank();attachMoneyInputs();
});


/* ---------------- Load from hash (optional) ---------------- */
function loadFromHash(){
  try {
    const hash = location.hash.replace(/^#/,'');
    if(!hash) return;
    const params = new URLSearchParams(hash);
    if(params.get('price')) priceEl.value=params.get('price');
    if(params.get('dpVal')) dpValEl.value=params.get('dpVal');
    if(params.get('dpPct')) dpPctEl.value=params.get('dpPct');
    if(params.get('years')) yearsEl.value=params.get('years');
    if(params.get('rate')) rateEl.value=params.get('rate');
    if(params.get('bank')) { bankEl.value=params.get('bank'); updateRateFromBank(); }
    setTimeout(()=>{ handleCalculate(); }, 220);
  } catch(e){}
}
document.addEventListener('DOMContentLoaded', ()=>{
  populateBankSelect();
  bankEl.value = 'BCA';
  updateRateFromBank();
  attachMoneyInputs();
  loadFromHash();
});
</script>
</body>
</html>
